{"id":"find_inactives","script":"//* TITLE Find Inactives **//\r\n//* VERSION 0.2.1 **//\r\n//* DESCRIPTION Find the inactive blogs you follow **//\r\n//* DEVELOPER STUDIOXENIX **//\r\n//* DETAILS This extension lets you find the blog that haven't been updated for over 30 days. Just go to list of blogs you follow, then click on &quot;Find Inactive Blogs&quot; button below your Crushes to get started. **//\r\n//* FRAME false **//\r\n//* BETA false **//\r\n\r\nXKit.extensions.find_inactives = new Object({\r\n\r\n\trunning: false,\r\n\r\n\ttimeout_time: 300,\r\n\r\n\tpreferences: {\r\n\t\ttime: {\r\n\t\t\ttext: \"Time to mark a blog as inactive\",\r\n\t\t\tdefault: \"30\",\r\n\t\t\tvalue: \"30\",\r\n\t\t\ttype: \"combo\",\r\n\t\t\tvalues: [\r\n\t\t\t\t\"2 weeks\", \"14\",\r\n\t\t\t\t\"A month\", \"30\",\r\n\t\t\t\t\"Two months\", \"60\",\r\n\t\t\t\t\"4 months\", \"120\",\r\n\t\t\t\t\"A year\", \"365\"\r\n\t\t\t]\r\n\t\t}\r\n\t},\r\n\r\n\trun: function() {\r\n\t\tthis.running = true;\r\n\r\n\t\tif (document.location.href.indexOf(\"www.tumblr.com/following\") === -1) { return; }\r\n\r\n\t\tXKit.tools.init_css(\"find_inactives\");\r\n\r\n\t\t$(\".grey_note\").before('<div class=\"xkit-button xkit-wide-button\" id=\"xkit-find-inactives-button\" style=\"display: block; font-size: 12px; font-weight: bold; text-align: center; margin-bottom: 10px; margin-top: 15px;\">Find Inactive Blogs</div>');\r\n\r\n\t\t$(\"#xkit-find-inactives-button\").click(function() {\r\n\r\n\t\t\tXKit.extensions.find_inactives.start();\r\n\r\n\t\t});\r\n\r\n\t},\r\n\r\n\tpeople_list: [],\r\n\tretired_people_list: [],\r\n\tpage: 0,\r\n\tpeople_count: 0,\r\n\tpeople_index: 0,\r\n\tpeople_per_page: 25,\r\n\tconcurrent_requests: 8, //Arbitrary number.  This just seemed to go fast.  ~7.50 for 1000 Tumblrs\r\n\r\n\tstart: function() {\r\n\r\n\t\tXKit.extensions.find_inactives.retired_people_list = [];\r\n\t\tXKit.extensions.find_inactives.people_list = [];\r\n\t\tXKit.extensions.find_inactives.page = 0;\r\n\t\tXKit.extensions.find_inactives.people_index = -1;\r\n\r\n\t\tXKit.window.show(\"Please wait..\",\"I'm trying to find the inactive blogs, this might take a while.\" + XKit.progress.add(\"find-inactives\") + \"<div id=\\\"xkit-find-inactives-status\\\">Crunching the numbers...</div>\",\"info\");\r\n\r\n\t\tXKit.extensions.find_inactives.get_count();\r\n\r\n\t},\r\n\r\n\tget_count: function() {\r\n\t\tvar count_text = $(\"#tabs\").html().match(/Following.*Tumblr/gm)[0];\r\n\t\tcount_text = count_text.replace(/[^0-9\\.]/g, '');\r\n\t\tvar people_count = parseInt(count_text);\r\n\t\tXKit.extensions.find_inactives.people_count = people_count;\r\n\r\n\t\tXKit.extensions.find_inactives.page_tracker.reset();\r\n\t\tXKit.extensions.find_inactives.page_tracker.set_page_count(people_count / this.people_per_page);\r\n\r\n\t\t//Start our concurrent requests.\r\n\t\tfor(var i = 0; i < XKit.extensions.find_inactives.concurrent_requests; i++) {\r\n\t\t\tXKit.extensions.find_inactives.next_page();\r\n\t\t}\r\n\t},\r\n\r\n\tshow_error: function(message) {\r\n\r\n\t\tXKit.window.close();\r\n\t\tXKit.window.show(\"Find Inactives encountered an error\", message, \"error\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-close-message\\\">OK</div>\");\r\n\r\n\t},\r\n\r\n\tnext_page: function() {\r\n\t\tvar self = this;\r\n\t\tvar next_page = this.page_tracker.get_next_page();\r\n\t\tif(next_page < 0){\r\n\t\t\tif(this.page_tracker.has_completed()){\r\n\t\t\t\t$(\"#xkit-find-inactives-status\").html(\"Fetching information about the people I've just learned about...\");\r\n\t\t\t\tXKit.extensions.find_inactives.list_people();\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.page_tracker.start_processing_page(next_page);\r\n\t\tGM_xmlhttpRequest({\r\n\t\t\tmethod: \"GET\",\r\n\t\t\turl: \"http://www.tumblr.com/following/\" + (next_page * 25),\r\n\t\t\tjson: false,\r\n\t\t\tonerror: function(response) {\r\n\t\t\t\tXKit.extensions.find_inactives.show_error(\"<b>Unable to get the blog information.</b><br/>Please try again later.<br/><br/>Error Code: FIA-330\");\r\n\t\t\t\treturn;\r\n\t\t\t},\r\n\t\t\tonload: function(response) {\r\n\r\n\t\t\t\ttry {\r\n\r\n\t\t\t\t\tvar total = XKit.extensions.find_inactives.people_count;\r\n\t\t\t\t\tvar perc = self.page_tracker.get_progress();\r\n\r\n\t\t\t\t\tconsole.log(perc + \" | \" + total);\r\n\r\n\t\t\t\t\tXKit.progress.value(\"find-inactives\", perc);\r\n\r\n\t\t\t\t\t$(\".follower\", response.responseText).each(function() {\r\n\r\n\t\t\t\t\t\tvar username = $(this).find(\".name\").find(\"a\").html();\r\n\t\t\t\t\t\tvar last_updated = $(this).find(\".last_updated\").html();\r\n\t\t\t\t\t\tvar last_updated_days = XKit.extensions.find_inactives.days_since_updated(last_updated);\r\n\r\n\r\n\t\t\t\t\t\tif (XKit.extensions.find_inactives.people_list.indexOf(username) === -1) {\r\n\t\t\t\t\t\t\tXKit.extensions.find_inactives.people_list.push(username);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconsole.log(username + \" => \" + last_updated_days);\r\n\r\n\t\t\t\t\t\tif (last_updated_days >= parseInt(XKit.extensions.find_inactives.preferences.time.value)) {\r\n\t\t\t\t\t\t\tvar m_user = {};\r\n\t\t\t\t\t\t\tm_user.username = username;\r\n\t\t\t\t\t\t\tm_user.days = last_updated;\r\n\r\n\t\t\t\t\t\t\tXKit.extensions.find_inactives.retired_people_list.push(m_user);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tself.page_tracker.finished_processing_page(next_page);\r\n\t\t\t\t\tsetTimeout(function() { XKit.extensions.find_inactives.next_page(); }, XKit.extensions.find_inactives.timeout_time);\r\n\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\tXKit.extensions.find_inactives.show_error(\"<b>Unable to get the blog information.</b><br/>Please try again later.<br/><br/>Error Code: FIA-230<br/>\" + e.message);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t},\r\n\r\n\r\n\tdays_since_updated: function(updated_time){\r\n\t\tif(! updated_time){\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tvar time_value = updated_time.replace(/[^0-9\\.]/g, '');\r\n\t\ttime_value = parseInt(time_value, 10);\r\n\r\n\t\tif(updated_time.indexOf(\"day\") > -1){\r\n\t\t\treturn time_value;\r\n\t\t}\r\n\t\tif(updated_time.indexOf(\"week\") > -1){\r\n\t\t\treturn time_value * 7;\r\n\t\t}\r\n\t\tif(updated_time.indexOf(\"month\") > -1){\r\n\t\t\treturn time_value * 30;\r\n\t\t}\r\n\t\tif(updated_time.indexOf(\"year\") > -1){\r\n\t\t\treturn time_value * 365;\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\t},\r\n\r\n\t//Keeps track of what pages are currently being processed, finished processing, and need to process.\r\n\tpage_tracker: {\r\n\r\n\t\tpage_count: 0,\r\n\t\tcurrent_page: 0,\r\n\t\tpage_processed: {}, //page_processed will either be undefined, false, or true.  Undefined: page not started.  false: page started to process.  true: page finished processing.\r\n\r\n\t\t//Resets this object to its base state.  Always set it before starting to find inactive followers.\r\n\t\treset: function(){\r\n\t\t\tthis.page_count = 0;\r\n\t\t\tthis.current_page = 0;\r\n\t\t\tthis.page_processed = {};\r\n\t\t},\r\n\r\n\t\tset_page_count: function(count){\r\n\t\t\tthis.page_count = count;\r\n\t\t},\r\n\r\n\t\t//Returns the next page that needs to be processed, -1 of there are no pages to be processed.\r\n\t\tget_next_page: function(){\r\n\t\t\tfor(var i = 0; i < this.page_count; i++){\r\n\t\t\t\tif(this.page_processed[i] === undefined){\r\n\t\t\t\t\tconsole.log(\"Processing page \" + i + \" | \" + this.page_count);\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t},\r\n\r\n\t\tstart_processing_page: function(page){\r\n\t\t\tthis.page_processed[page] = false;\r\n\t\t\tif(this.current_page < page){\r\n\t\t\t\tthis.current_page = page;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfinished_processing_page: function(page){\r\n\t\t\tthis.page_processed[page] = true;\r\n\t\t},\r\n\r\n\t\thas_completed: function(){\r\n\t\t\tfor(var i = 0; i < this.page_count; i++){\r\n\t\t\t\tif(! this.page_processed[i]){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\t//returns the progress of finding inactives.  Value are between 0 and 100.\r\n\t\tget_progress: function(){\r\n\t\t\tvar progress_points = 0; // Weighted progress points.\r\n\t\t\tfor(var i = 0; i < this.page_count; i++){\r\n\r\n\t\t\t\tif(this.page_processed[i] === false){\r\n\t\t\t\t\tprogress_points += 1;\r\n\t\t\t\t}\r\n\t\t\t\tif(this.page_processed[i] === true){\r\n\t\t\t\t\tprogress_points += 2;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar total_points = this.page_count * 2;\r\n\t\t\treturn (progress_points / total_points) * 100;\r\n\t\t}\r\n\t},\r\n\r\n\tlist_people: function() {\r\n\r\n\t\tif (XKit.extensions.find_inactives.retired_people_list.length === 0) {\r\n\r\n\t\t\tXKit.window.show(\"All up to date!\", \"I couldn't find anyone who has been gone for more than \" + XKit.extensions.find_inactives.preferences.time.value + \" days.\", \"info\",\"<div class=\\\"xkit-button default\\\" id=\\\"xkit-close-message\\\">Whee!</div>\");\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar m_html = '<div class=\"nano\" id=\"find-inactives-window-outer\"><div class=\"content\" id=\"find-inactives-window\">';\r\n\r\n\t\tfor (var i=0;i<XKit.extensions.find_inactives.retired_people_list.length;i++) {\r\n\r\n\t\t\tm_html = m_html + \"<div data-url=\\\"http://\" + XKit.extensions.find_inactives.retired_people_list[i].username + \".tumblr.com/\\\" class=\\\"find-inactives-blog\\\">\" +\r\n\t\t\t\"<div class=\\\"name\\\">\" + XKit.extensions.find_inactives.retired_people_list[i].username + \"</div>\" +\r\n\t\t\t\"<div class=\\\"days\\\">\" + XKit.extensions.find_inactives.retired_people_list[i].days + \"</div>\" +\r\n\t\t\t\"<img src=\\\"http://api.tumblr.com/v2/blog/\" + XKit.extensions.find_inactives.retired_people_list[i].username + \".tumblr.com/avatar/512\\\" class=\\\"avatar\\\">\" +\r\n\t\t\t\"</div>\";\r\n\r\n\t\t}\r\n\r\n\t\tm_html = m_html + \"</div></div>\";\r\n\r\n\t\t$(\"body\").css(\"overflow\",\"hidden\");\r\n\r\n\t\tXKit.window.show(\"Found \" + XKit.extensions.find_inactives.retired_people_list.length + \" inactive blog(s)\", m_html, \"info\",\"<div class=\\\"xkit-button default\\\" id=\\\"xkit-close-message-find-inactives\\\">OK</div>\");\r\n\r\n\t\t$(\"#find-inactives-window-outer\").nanoScroller();\r\n\r\n\t\t$(\"#xkit-close-message-find-inactives\").click(function() {\r\n\r\n\t\t\t$(\"body\").css(\"overflow\",\"auto\");\r\n\t\t\tXKit.window.close();\r\n\r\n\t\t});\r\n\r\n\r\n\t\tif ($(\".find-inactives-blog\").length > 4) {\r\n\r\n\t\t\t$(\".find-inactives-blog:last-child\").css(\"border-bottom\", \"0\");\r\n\r\n\t\t}\r\n\r\n\t\t$(\".find-inactives-blog\").click(function() {\r\n\r\n\t\t\twindow.open($(this).attr('data-url'));\r\n\r\n\t\t});\r\n\r\n\t},\r\n\r\n\r\n\tdestroy: function() {\r\n\t\tthis.running = false;\r\n\t\t$(\"#xkit-find-inactives-button\").remove();\r\n\t}\r\n\r\n});\r\n","icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGNzdGMTE3NDA3MjA2ODExODA4MzkyMjM2MzU5MTQ4NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3MzI5Rjk5RDVENDQxMUUzOTc0NUVFMzYyMTQ1MzcwNSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3MzI5Rjk5QzVENDQxMUUzOTc0NUVFMzYyMTQ1MzcwNSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjAxODAxMTc0MDcyMDY4MTFBRTczREVDNEM5OEM0RTE5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkY3N0YxMTc0MDcyMDY4MTE4MDgzOTIyMzYzNTkxNDg0Ii8+IDwvcmRmOkRlc2NyaXB0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","css":"#find-inactives-window-outer {\r\n\theight: 230px;\r\n\tborder: 1px solid rgb(190,190,190);\r\n}\r\n\r\n.find-inactives-blog:hover {\r\n\tbackground: rgb(245,245,245);\r\n}\r\n.find-inactives-blog {\r\n\tborder-bottom: 1px solid rgb(190,190,190);\r\n\theight: 50px;\r\n\toverflow: hidden;\r\n\tposition: relative;\r\n\tpadding-left: 60px;\r\n\tfont-size: 13px;\r\n\tline-height: 16px;\r\n\tcursor: pointer;\r\n}\r\n\r\n.find-inactives-blog .name {\r\n\tposition: absolute;\r\n\ttop: 8px;\r\n\tleft: 55px;\r\n\tfont-weight: bold;\r\n}\r\n\r\n.find-inactives-blog .days {\r\n\tposition: absolute;\r\n\ttop: 24px;\r\n\tleft: 55px;\r\n\tfont-weight: normal;\r\n\tcolor: rgb(120,120,120);\r\n}\r\n\r\n.find-inactives-blog .avatar {\r\n\twidth: 32px;\r\n\theight: 32px;\r\n\tposition: absolute;\r\n\ttop: 8px;\r\n\tleft: 10px;\r\n\tborder-radius: 4px;\r\n}","title":"Find Inactives","description":"Find the inactive blogs you follow","developer":"STUDIOXENIX","version":"0.2.1","frame":"false","beta":"false","details":"This extension lets you find the blog that haven't been updated for over 30 days. Just go to list of blogs you follow, then click on &quot;Find Inactive Blogs&quot; button below your Crushes to get started.","file":"found","server":"up","errors":false,"slow":"false"}